<!DOCTYPE html>
<html lang="ko">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>재난방송온라인시스템_로그인_과학기술정보통신부</title>
  <link rel="icon" href="../img/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" type="text/css" href="../plugins/axicon/axicon.min.css" />
  <link rel="stylesheet" type="text/css" href="../plugins/jquery-ui/jquery-ui.min.css" />
  <link rel="stylesheet" type="text/css" href="../plugins/jqGrid/ui.jqgrid.css" />
  <link rel="stylesheet" type="text/css" href="../plugins/jquery-ui/themes/custom/jquery-ui.theme.min.css" />
  <link rel="stylesheet" type="text/css" href="../css/common.css" />
  <link rel="stylesheet" type="text/css" href="../css/style.css" />
  <link rel="stylesheet" type="text/css" href="../css/pop.css" />

  <script src="../plugins/jquery-1.11.0.min.js" charset="utf-8"></script>
  <script src="../plugins/jquery-ui/jquery-ui.min.js" charset="utf-8"></script>
  <script src="../plugins/jqGrid/jquery.jqGrid.min.js" type="text/javascript"></script>
  <script src="../plugins/jqGrid/i18n/grid.locale-kr.js" type="text/javascript"></script>
  <script src="../plugins/jquery-ui/ui/i18n/datepicker-ko.js" type="text/javascript"></script>
  <script src="../js/common.js" charset="utf-8"></script>
</head>

<body>
<div id="wrap">
  <div id="header">
    <h1><a href="">재난방송<strong>온라인시스템</strong></a></h1>
    <div class="nav_wrap">
      <div class="gnb">
        <ul class="gnb_list">
          <li>홍길동</li>
          <li><a href="" class="btn_userinfo divide">내정보</a></li>
          <li><a href="" class="btn_logout">로그아웃</a></li>
        </ul>
      </div>
      <div class="lnb">
        <ul class="lnb_list nav">
          <li><a href="#">통보문수신</a></li>
          <li><a href="#">통보문발신</a>
            <ul class="sub1">
              <li><a href="#">통보문 생성/발신</a></li>
              <li><a href="#">훈련/테스트 발신</a></li>
              <li><a href="#">공지사항 발신</a></li>
              <li><a href="#">발신이력</a></li>
            </ul>
          </li>
          <li><a href="#">조치현황</a>
            <ul class="sub1">
              <li><a href="#">담당자별 조치현황</a></li>
              <li><a href="#">재난방송 조치현황</a></li>
              <li><a href="#">수동발송</a></li>
              <li><a href="#">FAX/LMS 발송이력</a></li>
            </ul>
          </li>
          <li><a href="#">재난방송수신 클라이언트</a>
            <ul class="sub1">
              <li><a href="#">클라이언트 관리</a></li>
              <li><a href="#">클라이언트 그룹관리</a></li>
              <li><a href="#">클라이언트 정보변경요청</a></li>
              <li><a href="#">클라이언트 접속현황</a></li>
              <li><a href="#">교육이수결과</a></li>
            </ul>
          </li>
          <li><a href="#">기초정보관리</a>
            <ul class="sub1">
              <li><a href="#">공통코드</a></li>
              <li><a href="#">사용자 관리</a></li>
              <li><a href="#">연계기관</a></li>
              <li><a href="#">통보문 템플릿</a></li>
            </ul>
          </li>
          <li><a href="#">시스템관리</a>
            <ul class="sub1">
              <li><a href="#">시스템설정</a></li>
              <li><a href="#">권한관리</a></li>
              <li><a href="#">메뉴관리</a></li>
              <li><a href="#">로그관리</a></li>
              <li><a href="#">연계시스템 로그</a></li>
            </ul>
          </li>
          <li><a href="#">통합게시판</a>
            <ul class="sub1">
              <li><a href="#">자료실</a></li>
              <li><a href="#">시스템공지</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div id="cont">

    <!-- content -->
    <div class="content main">
      <div class="cont_tit blind">
        <h1>메인화면</h1>
      </div>
      <div class="cont_body">
        <div class="section fl" style="width:56%;">
          <div class="article">
            <div class="article_tit">
              <h2>통보문목록</h2>
            </div>
            <div class="article_body">
              <table id="jqGrid" class="jq-grid"></table>
              <script type="text/javascript">
              var mydata = [
                {"report_tit":"화재","scale":"2.2","receive_time":"2019-08-09 20:12:12","send_time":"2019-08-09 20:12:12","send_YN":"ok"},
                {"report_tit":"지진정보","scale":"DSP_CRN_AMN","receive_time":"2019-08-09 20:12:12","send_time":"2019-08-09 20:12:12"},
                {"report_tit":"[심각]태풍","scale":"DSP_CRN_AMN","receive_time":"2019-08-09 20:12:12","send_time":"2019-08-09 20:12:12"},
                {"report_tit":"화재","scale":"-","receive_time":"2019-08-09 20:12:12","send_time":"2019-08-09 20:12:12"},
                {"report_tit":"화재","scale":"2.2","receive_time":"2019-08-09 20:12:120","send_time":"2019-08-09 20:12:12"},
                {"report_tit":"화재","scale":"-","receive_time":"2019-08-09 20:12:12","send_time":"2019-08-09 20:12:12"},
                {"report_tit":"화재","scale":"3.1","receive_time":"2019-08-09 20:12:12","send_time":"2019-08-09 20:12:12"},
                {"report_tit":"화재","scale":"2.2","receive_time":"2019-08-09 20:12:12","send_time":"2019-08-09 20:12:12"}
                ];
                $(document).ready(function () {

                    $("#jqGrid").jqGrid({
                        data: mydata,
                        datatype: "local",
                        // url:,
                        // datatype: "json",
                        editurl: 'clientArray',
                        colModel: [
                            { label: '제목', name: 'report_tit', width:300},
                            { label: '규모', name: 'scale', width: 50, align: 'center' },
                            { label: '수신시각', name: 'receive_time', width: 250, align:'center'},
                            { label: '통보시각', name: 'send_time', width: 250, align:'center'},
                            { label: '통보여부', name: 'send_YN', width: 100, align:'center', formatter:mk_icon}
                        ],
                        // width: 0,
                        height:135,
                        sortname: 'scale',
                        rownumbers: true, // show row numberOfMonths
                        rownumWidth: 25,
                        rowTotal: 10,
                        // multiselect: true,
                        jsonReader : {repeatitems : false}
                    });
                });
                function mk_icon(cellValue, options, rowdata, action){
                  var html, txt = "통보안됨";
                  if(cellValue == "ok") txt = "통보완료";
                  html = '<span class="send_yn '+cellValue+'">'+ txt +'</span>';
                  return html;
                }
              </script>
            </div>
            <div class="section fl" style="width:380px;">
              <div class="article">
      					<div class="article_tit">
      						<h2>미리보기</h2>
      						<span class="fr"><a href="#" class="btn btn_axi btn_print">출력</a></span>
      					</div>
      					<div class="article_body">
      						<div class="report">
      							<div class="tit">
      								<h1>과학기술정보통신부 | 방송통신위<span>( 기상청 )</span></h1>
      							</div>
      							<div class="scroll" style="height:388px;">
      								<h2>건조경보 대치에 의한 발표(의무)</h2>
      								<dl>
      									<dt>재해(재난)유형</dt>
      									<dd>자연 재해</dd>
      									<dt>재해(재난)지역</dt>
      									<dd>강릉시, 동해시, 삼척시, 속초시, 고성군, 양양군</dd>
      									<dt class="dt_long">재난방송 요청시간</dt>
      									<dd>2019년 01월 18일 11시 00분</dd>
      									<dt class="dt_none_dot">발표 내용</dt>
      									<dd>
      										<ol>
      											<li>방송통신발전 기본법 제40조(재난방송 등)와 관련하여</li>
      											<li>2019년 01월 18일 11:00 강릉시, 동해시, 삼척시, 속초시, 고성군, 양양군 지역에 건조경보 대치가발표됨에 따라 위 법렴에 의거 아래와 같이 재난방송을 요청하오니 국민들이 경각심을 갖고 미리 대비할 수 있도록 자막표출 등 재난방송을 실시하여 주시기 바랍니다.
      											</li>
      											<li class="ins">라디오방송의 경우 핵심내용 위주로 방송문안 조정 가능</li>
      										</ol>
      									</dd>
      								</dl>
      								<h3>방송문안</h3>
      								<ul class="li_circle">
      									<li>2019년 01월 18일 11:00 강릉시, 동해시, 삼척시, 속초시, 고성군, 양양군 지역에 건조경보 대치가발표가 발효되었습니다.</li>
      									<li>화기를 취급할 때 각별히 주의해야 하며 산에서는 성냥, 담배 등 인화성 물질을 소지하지 마시기 바랍니다.</li>
      									<li>숲 가까이에 있는 논두렁에는 불을 지르지 마시고, 각종 폐기물도 태우지 말아야 합니다.</li>
      									<li>산불을 발견하면 즉시 119 산림관서, 경찰서에 신고해주시기 바랍니다.</li>
      									<li>행정안전부에서 알려드렸습니다.  끝.</li>
      								</ul>
      							</div>
      							<div class="foot">
      								※ 문의사항은 과학기술정보통신부(02-2100-2614), 방송통신위원회(02-2110-1429)로 연락바랍니다. 수신 후 클라이언트 프로그램을 통해 조치결과를 회신하여 주시기 바랍니다.
      							</div>
      						</div>
      					</div>
      				</div>
            </div>
            <div class="section fr" style="width:calc(96% - 380px);">
              <div class="article">
      					<div class="article_tit">
      						<h2>매체별 수신건수</h2>
      					</div>
      					<div class="article_body">
                  <span class="legend">
      							<em class="send">수신</em>
      							<em class="desend">미수신</em>
      						</span>
      						<dl class="bar_graph">
      							<dt>PC</dt>
      							<dd class="graph_wrap">
                      <div class="graph">
        								<span class="send" style="width:10%;"><em>137</em></span>
        								<span class="desend" style="width:90%;"><em>348</em></span>
                      </div>
                      <span class="total">485건</span>
      							</dd>
                    <dt>MMS</dt>
      							<dd class="graph_wrap">
                      <div class="graph">
        								<span class="send" style="width:10%;"><em>137</em></span>
        								<span class="desend" style="width:90%;"><em>348</em></span>
                      </div>
                      <span class="total">485건</span>
      							</dd>
                    <dt>FAX</dt>
      							<dd class="graph_wrap">
                      <div class="graph">
        								<span class="send" style="width:10%;"><em>137</em></span>
        								<span class="desend" style="width:90%;"><em>348</em></span>
                      </div>
                      <span class="total">485건</span>
      							</dd>
                    <dt>자막</dt>
      							<dd class="graph_wrap">
                      <div class="graph">
        								<span class="send" style="width:10%;"><em>137</em></span>
        								<span class="desend" style="width:90%;"><em>348</em></span>
                      </div>
                      <span class="total">485건</span>
      							</dd>
                    <dt>라디오</dt>
      							<dd class="graph_wrap">
                      <div class="graph">
        								<span class="send" style="width:10%;"><em>137</em></span>
        								<span class="desend" style="width:90%;"><em>348</em></span>
                      </div>
                      <span class="total">485건</span>
      							</dd>
                    <dt>신규</dt>
      							<dd class="graph_wrap">
                      <div class="graph">
        								<span class="send" style="width:10%;"><em>137</em></span>
        								<span class="desend" style="width:90%;"><em>348</em></span>
                      </div>
                      <span class="total">485건</span>
      							</dd>
      						</dl>
      					</div>
      				</div>
            </div>
          </div>
        </div>
        <div class="section fr" style="width:43%;">
          <div class="article">
  					<div class="article_tit">
  						<h2>연동기관 접속현황</h2>
              <ul class="connect_legend">
                <li>접속 90</li>
                <li>미접속 10</li>
              </ul>
  					</div>
  					<div class="article_body">
              <table id="jqGrid2" class="jq-grid"></table>
              <script type="text/javascript">
                var mydata2 = [
                  {"division":"자동자막시스템","org":"KBS","director":"홍길동!010-1234-5678","connect_YN":"ok"},
                  {"division":"대구","org":"MBC","director":"홍이동!010-1234-5678","connect_YN":"ok"},
                  {"division":"경북","org":"CBS","director":"홍삼동!010-1234-5678","connect_YN":"no"}
                ];
                function mk_icon2(cellValue, options, rowdata, action){
                  var html, txt = "no";
                  if(cellValue == "ok") txt = "ok";
                  html = '<span class="send_yn '+cellValue+'">'+ txt +'</span>';
                  return html;
                }
                var grid = $("#jqGrid2");
                var getUniqueNames = function (columnName) {
                    var texts = grid.jqGrid('getCol',columnName), uniqueTexts = [],
                        textsLength = texts.length, text, textsMap = {}, i;
                    for (i=0;i<textsLength;i++) {
                        text = texts[i];
                        if (text !== undefined && textsMap[text] === undefined) {
                            // to test whether the texts is unique we place it in the map.
                            textsMap[text] = true;
                            uniqueTexts.push(text);
                        }
                    }
                    return uniqueTexts;
                };
                var buildSearchSelect = function (uniqueNames) {
                    var values=":전체";
                    $.each (uniqueNames, function() {
                        values += ";" + this + ":" + this;
                    });
                    return values;
                };
                var setSearchSelect = function (columnName) {
                  grid.jqGrid('setColProp', columnName,
                    {
                      stype: 'select',
                      searchoptions: {
                          value:buildSearchSelect(getUniqueNames(columnName)),
                          sopt:['eq']
                      }
                    }
                  );
                };


                $(document).ready(function () {
                  // var timer;
                  // $("#search_cells").on("keyup", function() {
            			// 	var self = this;
            			// 	if(timer) { clearTimeout(timer); }
            			// 	timer = setTimeout(function(){
            			// 		//timer = null;
            			// 		$("#jqGrid2").jqGrid('filterInput', self.value);
            			// 	},0);
            			// });

                    grid.jqGrid({
                        data: mydata2,
                        datatype: "local",
                        // url:,
                        // datatype: "json",
                        editurl: 'clientArray',
                        colModel: [
                          { label: '접속여부', name: 'connect_YN', width:100, align:'center', formatter:mk_icon2, stype:"select", searchoptions:{value:":전체;ok:ok;no:no"}},
                          // { label: '접속여부', name: 'connect_YN', width:100, align:'center', formatter:mk_icon2},
                          { label: '구분', name: 'division', width:300,stype: "select"},
                          { label: '기관', name: 'org', width: 200, align: 'center' },
                          { label: '담당자', name: 'director', width: 150, align:'center', cellattr:function (rowId, value) {
                            value = value.split("!",2);
                              return value === "foo" ? ' title="bar"' : ' title="연락처 : ' + value[1] + '"';
                          },formatter:mk_director}
                        ],
                        // width: 0,
                        height:443,
                        sortname: 'org',
                        rowTotal:-1,
                        title: "false",
                        // multiselect: true,
                        jsonReader : {repeatitems : false}
                    });
                    setSearchSelect('division');
                    grid.jqGrid('setColProp', 'org',
                      {searchoptions: {
                        sopt:['cn'],
                        dataInit: function(elem) {
                            $(elem).autocomplete({
                                source:getUniqueNames('org'),
                                delay:0,
                                minLength:0
                            });
                        }
                      }
                    });
                    grid.jqGrid('filterToolbar', {stringResult:false, searchOnEnter:true, defaultSearch:"cn"});

                });
                function mk_director(cellValue, options, rowdata, action){
                  var val = cellValue.split("!",2);
                  var html = "<span title='!"+val[1]+"!'>"+val[0]+"</span>"
                  return html;
                };
                </script>
            </div>
          </div>
          <div class="article mgTop0 paTop0">
  					<div class="article_tit">
  						<h2>시스템 구동상태</h2>
  					</div>
  					<div class="article_body">
  						<ul class="sys_status">
  							<li>통보문 FTP모듈<a href="#" class="btn">정지</a></li>
  							<li>통보문 Sock모듈<a href="#" class="btn">정지</a></li>
  							<li class="error">데이터베이스<a href="#" class="btn">재시작</a></li>
  							<li>FAX 통보모듈<a href="#" class="btn">정지</a></li>
  							<li>MMS 통보모듈<a href="#" class="btn">정지</a></li>
  							<li class="error alert">라디오<a href="#" class="btn">장애알림</a></li>
                <li>신규<a href="#" class="btn">정지</a></li>
  							<li class="error alert">자막방송서버<a href="#" class="btn">장애알림</a></li>
  						</ul>
  					</div>
  				</div>

        </div>
      </div>
    </div>
    <!-- content__e -->
  </div>
</div>

</body>
</html>
<script type="text/javascript">
  $(function(){
    init();
  })
</script>
