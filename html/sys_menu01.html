<!DOCTYPE html>
<html lang="ko">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>재난방송온라인시스템_로그인_과학기술정보통신부</title>
  <link rel="icon" href="../img/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" type="text/css" href="../plugins/axicon/axicon.min.css" />
  <link rel="stylesheet" type="text/css" href="../plugins/jquery-ui/jquery-ui.min.css" />
  <link rel="stylesheet" type="text/css" href="../plugins/jqGrid/ui.jqgrid.css" />
  <link rel="stylesheet" type="text/css" href="../plugins/jquery-ui/themes/custom/jquery-ui.theme.min.css" />
  <link rel="stylesheet" type="text/css" href="../css/common.css" />
  <link rel="stylesheet" type="text/css" href="../css/style.css" />
  <link rel="stylesheet" type="text/css" href="../css/pop.css" />

  <script src="../plugins/jquery-1.11.0.min.js" charset="utf-8"></script>
  <script src="../plugins/jquery-ui/jquery-ui.min.js" charset="utf-8"></script>
  <script src="../plugins/jqGrid/jquery.jqGrid.min.js" type="text/javascript"></script>
  <script src="../plugins/jqGrid/i18n/grid.locale-kr.js" type="text/javascript"></script>
  <script src="../plugins/jquery-ui/ui/i18n/datepicker-ko.js" type="text/javascript"></script>
  <script src="../js/common.js" charset="utf-8"></script>
</head>

<body>
<div id="wrap">
  <div id="header">
    <h1><a href="">재난방송<strong>온라인시스템</strong></a></h1>
    <div class="nav_wrap">
      <div class="gnb">
        <ul class="gnb_list">
          <li>홍길동</li>
          <li><a href="" class="btn_userinfo divide">내정보</a></li>
          <li><a href="" class="btn_logout">로그아웃</a></li>
        </ul>
      </div>
      <div class="lnb">
        <ul class="lnb_list nav">
          <li><a href="#">통보문수신</a></li>
          <li><a href="#">통보문발신</a>
            <ul class="sub1">
              <li><a href="#">통보문 생성/발신</a></li>
              <li><a href="#">훈련/테스트 발신</a></li>
              <li><a href="#">공지사항 발신</a></li>
              <li><a href="#">발신이력</a></li>
            </ul>
          </li>
          <li><a href="#">조치현황</a>
            <ul class="sub1">
              <li><a href="#">담당자별 조치현황</a></li>
              <li><a href="#">재난방송 조치현황</a></li>
              <li><a href="#">수동발송</a></li>
              <li><a href="#">FAX/LMS 발송이력</a></li>
            </ul>
          </li>
          <li><a href="#">재난방송수신 클라이언트</a>
            <ul class="sub1">
              <li><a href="#">클라이언트 관리</a></li>
              <li><a href="#">클라이언트 그룹관리</a></li>
              <li><a href="#">클라이언트 정보변경요청</a></li>
              <li><a href="#">클라이언트 접속현황</a></li>
              <li><a href="#">교육이수결과</a></li>
            </ul>
          </li>
          <li><a href="#">기초정보관리</a>
            <ul class="sub1">
              <li><a href="#">공통코드</a></li>
              <li><a href="#">사용자 관리</a></li>
              <li><a href="#">연계기관</a></li>
              <li><a href="#">통보문 템플릿</a></li>
            </ul>
          </li>
          <li><a href="#">시스템관리</a>
            <ul class="sub1">
              <li><a href="#">시스템설정</a></li>
              <li><a href="#">권한관리</a></li>
              <li><a href="#">메뉴관리</a></li>
              <li><a href="#">로그관리</a></li>
              <li><a href="#">연계시스템 로그</a></li>
            </ul>
          </li>
          <li><a href="#">통합게시판</a>
            <ul class="sub1">
              <li><a href="#">자료실</a></li>
              <li><a href="#">시스템공지</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div id="cont">

    <!-- snb -->
  	<div id="snb" class="snb">
      <div class="snb_wrap">
        <div class="snb_tit bass">
          <h1>시스템관리</h1>
        </div>
        <ul class="snb_list">
          <li><a href="#">시스템설정</a></li>
          <li><a href="#">권한관리</a></li>
          <li><a href="#" class="on">메뉴관리</a></li>
          <li><a href="#">로그관리</a></li>
          <li><a href="#">연계시스템 로그</a></li>
        </ul>
      </div>
      <p class="copyright">© Ministry of Science and ICT. All rights reserved.</p>
    </div>
    <!-- snb__e -->

    <!-- content -->
    <div class="content">
      <div class="cont_tit">
        <h1>메뉴관리<span>시스템관리</span></h1>
        <div class="locate">
          <ul>
            <li><a href="#"><i class="axi axi-ion-home" title="home"></i></a></li>
            <li><a href="#">시스템관리</a></li>
            <li>메뉴관리</li>
          </ul>
        </div>
      </div>
      <div class="cont_body">
        <div class="tab_wrap">
          <ul class="tab">
            <li class="on"><a href="#tab01">권한별 메뉴</a></li>
            <li><a href="#tab02">메뉴관리</a></li>
          </ul>
          <div id="tab02" class="tab_contents">
            <div class="section fl section_linked" style="width:100%;">
              <div class="article">
                <div class="article_body">
                  <div class="arti_section fl section_linked" style="width:64%;">
                    <div class="article_tit">
                      <h2>권한코드</h2>
                    </div>
                    <div class="article_body">
                      <table id="jqGrid" class="jq-grid"></table>
                      <script type="text/javascript">
                      var mydata = [
                        {"org":"MBC","competent":"msit","client":"홍길동 (admin)","area":"서울","useYN":"사용"},
                        {"org":"KBS","competent":"msit","client":"김이동 (admin)","area":"서울","useYN":"사용"},
                        {"org":"CBS","competent":"kcc","client":"이삼동 (admin)","area":"경기","useYN":"사용"},
                        {"org":"SBS","competent":"msit","client":"박사동 (admin)","area":"경기","useYN":"사용"}
                      ];
                      $(document).ready(function () {

                        var grid = $("#jqGrid");
                        var getUniqueNames = function (columnName) {
                            var texts = grid.jqGrid('getCol',columnName), uniqueTexts = [],
                                textsLength = texts.length, text, textsMap = {}, i;
                            for (i=0;i<textsLength;i++) {
                                text = texts[i];
                                if (text !== undefined && textsMap[text] === undefined) {
                                    // to test whether the texts is unique we place it in the map.
                                    textsMap[text] = true;
                                    uniqueTexts.push(text);
                                }
                            }
                            return uniqueTexts;
                        };
                        grid.jqGrid({
                          data: mydata,
                          datatype: "local",
                          // url:,
                          // datatype: "json",
                          editurl: 'clientArray',
                          colModel: [
                            { label: '권한코드', name: 'org', width: 350,editable: true },
                            { label: '코드명', name: 'client', width: 250,editable: true },
                            { label: '설명', name: 'area', width: 200,stype:"select", align:'center', searchoptions:{value:":전체;서울:서울;경기:경기"},editable: true},
                            { label: '사용여부', name: 'useYN', width: 130, align: 'center', stype:"select", searchoptions:{value:":전체;사용:사용;미사용:미사용"},editable: true}
                          ],
                          height: 556,
                          sortname: 'org',
                          rownumbers: true,
                          rownumWidth: 25,
                          rowTotal: -1,
                          jsonReader : {repeatitems : false}
                        });
                        grid.jqGrid('setColProp', 'org',
                          {
                            searchoptions: {
                            sopt:['cn'],
                            dataInit: function(elem) {
                              $(elem).autocomplete({
                                  source:getUniqueNames('org'),
                                  delay:0,
                                  minLength:0
                              });
                            }
                          }
                        });
                        grid.jqGrid('setColProp', 'client',
                          {searchoptions: {
                            sopt:['cn'],
                            dataInit: function(elem) {
                              $(elem).autocomplete({
                                  source:getUniqueNames('client'),
                                  delay:0,
                                  minLength:0
                              });
                            }
                          }
                        });
                        grid.jqGrid('filterToolbar', {stringResult:false, searchOnEnter:true, defaultSearch:"cn"});
                      });

                      </script>
                    </div>
                  </div>
                  <div class="arti_section fr" style="width:32%;">
                    <div class="article_tit">
                      <h2>메뉴 접근제한</h2>
                      <span class="fr">
                        <a href="" class="btn_axi axi_gray btn_all" sel-toggle="on">전체선택</a>
                        <a href="" class="btn_axi axi_red btn_save">저장</a>
                      </span>
                    </div>
                    <div class="article_body scroll accordion_wrap" style="height:616px;">
                      <dl class="menu_accordion" ui-ani="accordion">
                        <dt><input type="checkbox" id="m01" /><label for="m01">통보문수신</label></dt>
                        <dd>
                          <ul>
                            <li><input type="checkbox" id="m01_1" /><label for="m01_1">통보문 수신 내역</label></li>
                          </ul>
                        </dd>
                        <dt><input type="checkbox" id="m02" /><label for="m02">통보문발신</label></dt>
                        <dd>
                          <ul>
                            <li><input type="checkbox" id="m02_1"/><label for="m02_1">통보문 생성/발신</label></li>
                            <li><input type="checkbox" id="m02_2"/><label for="m02_2">훈련/테스트발신</label></li>
                            <li><input type="checkbox" id="m02_3"/><label for="m02_3">공지사항발신</label></li>
                            <li><input type="checkbox" id="m02_4"/><label for="m02_4">발신이력</label></li>
                          </ul>
                        </dd>
                        <dt><input type="checkbox" id="m03" /><label for="m03">조치현황</label></dt>
                        <dd>
                          <ul>
                            <li><input type="checkbox" id="m03_1"/><label for="m03_1">담당자별 조치현황</label></li>
                            <li><input type="checkbox" id="m03_2"/><label for="m03_2">재난방송 조치현황</label></li>
                            <li><input type="checkbox" id="m03_3"/><label for="m03_3">수동발송</label></li>
                            <li><input type="checkbox" id="m03_4"/><label for="m03_4">FAX/LMS 발송이력</label></li>
                          </ul>
                        </dd>
                        <dt><input type="checkbox" id="m04" /><label for="m04">재난방송 수신 클라이언트</label></dt>
                        <dd>
                          <ul>
                            <li><input type="checkbox" id="m04_1" /><label for="m04_1">클라이언트 관리</label></li>
                            <li><input type="checkbox" id="m04_2" /><label for="m04_2">클라이언트 그룹관리</label></li>
                            <li><input type="checkbox" id="m04_3" /><label for="m04_3">클라이언트 정보변경요청</label></li>
                            <li><input type="checkbox" id="m04_4" /><label for="m04_4">클라이언트 접속현황</label></li>
                            <li><input type="checkbox" id="m04_5" /><label for="m04_5">교육이수결과</label></li>
                          </ul>
                        </dd>
                        <dt><input type="checkbox" id="m05" /><label for="m05">기초정보관리</label></dt>
                        <dd>
                          <ul>
                            <li><input type="checkbox" id="m05_1" /><label for="m05_1">공통코드</label></li>
                            <li><input type="checkbox" id="m05_2" /><label for="m05_2">사용자관리</label></li>
                            <li><input type="checkbox" id="m05_3" /><label for="m05_3">연계기관</label></li>
                            <li><input type="checkbox" id="m05_4" /><label for="m05_4">통보문 템플릿</label></li>
                          </ul>
                        </dd>
                        <dt><input type="checkbox" id="m06" /><label for="m06">시스템관리</label></dt>
                        <dd>
                          <ul>
                            <li><input type="checkbox" id="m06_1" /><label for="m06_1">시스템설정</label></li>
                            <li><input type="checkbox" id="m06_2" /><label for="m06_2">권한관리</label></li>
                            <li><input type="checkbox" id="m06_3" /><label for="m06_3">메뉴관리</label></li>
                            <li><input type="checkbox" id="m06_4" /><label for="m06_4">로그관리</label></li>
                            <li><input type="checkbox" id="m06_5" /><label for="m06_5">연계시스템 로그</label></li>
                          </ul>
                        </dd>
                        <dt><input type="checkbox" id="m07" /><label for="m07">통합게시판</label></dt>
                        <dd>
                          <ul>
                            <li><input type="checkbox" id="m07_1" /><label for="m07_1">자료실</label></li>
                            <li><input type="checkbox" id="m07_2" /><label for="m07_2">시스템공지</label></li>
                          </ul>
                        </dd>
                      </dl>


                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
    <!-- content__e -->
  </div>

</div>
</body>
</html>
<script type="text/javascript">
  $(function(){
    init();

    var getDT = $('[ui-ani]').find('dt');
    function createBtn(){
      var getDD = getDT.next('dd');
      getDD.each(function(index, item){
        var getLi = getDD.eq(index).find('li').length;
        (getLi > 1) ? $("<a>토글</a>").prependTo(getDT.eq(index)) : getDT.eq(index).css('text-indent','-11px');
      })
    }
    createBtn(); //토글버튼 생성
    getDT.addClass('open'); //전체 열기

    // 전체선택 토글
    var present = $('[sel-toggle]').attr('sel-toggle');
    $('[sel-toggle]').on('click',function(e){
      e.preventDefault();
      if(present == 'on'){
        $('[ui-ani]').find('input:checkbox').prop('checked','checked');
        present = 'off';
      }else{
        $('[ui-ani]').find('input:checkbox').removeProp('checked');
        present = 'on';
      }
    })

    getDT.on('click', "a", function(e){
      e.preventDefault();
      var openDD = $(this).parents('dt'),
          sub = $(this).parents('dt').next('dd').find('li');
      if(sub.length > 1)openDD.toggleClass('open');
    });

    var getCheck = getDT.children('input:checkbox');
    getCheck.on('change',function(){
      var getChecked = $(this)['context']['checked'],
          setChecked = $(this).parent('dt').next('dd').find('input:checkbox');
      (getChecked) ? setChecked.prop('checked','checked') : setChecked.removeProp('checked');
    })
  });

</script>
