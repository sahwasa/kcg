<!DOCTYPE html>
<html lang="ko">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>재난방송온라인시스템_로그인_과학기술정보통신부</title>
  <link rel="icon" href="../img/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" type="text/css" href="../plugins/axicon/axicon.min.css" />
  <link rel="stylesheet" type="text/css" href="../plugins/jquery-ui/jquery-ui.min.css" />
  <link rel="stylesheet" type="text/css" href="../plugins/jqGrid/ui.jqgrid.css" />
  <link rel="stylesheet" type="text/css" href="../plugins/jquery-ui/themes/custom/jquery-ui.theme.min.css" />
  <link rel="stylesheet" type="text/css" href="../css/common.css" />
  <link rel="stylesheet" type="text/css" href="../css/style.css" />
  <link rel="stylesheet" type="text/css" href="../css/pop.css" />

  <script src="../plugins/jquery-1.11.0.min.js" charset="utf-8"></script>
  <script src="../plugins/jquery-ui/jquery-ui.min.js" charset="utf-8"></script>
  <script src="../plugins/jqGrid/jquery.jqGrid.min.js" type="text/javascript"></script>
  <script src="../plugins/jqGrid/i18n/grid.locale-kr.js" type="text/javascript"></script>
  <script src="../plugins/jquery-ui/ui/i18n/datepicker-ko.js" type="text/javascript"></script>
  <script src="../js/common.js" charset="utf-8"></script>
</head>

<body>

  <div class="overlay" style="display:none;">
    <div class="pop_wrap" dataformat="modal" style="width:500px;height:290px;margin:-185px 0 0 -350px;">
      <div class="pop_tit">
        <h1>서브메뉴</h1>
        <span>
          <a href="" role="btn_close" class="btn_pop_close"></a>
        </span>
      </div>
      <div class="pop_body">
        <div class="article">
          <div class="article_tit blind">
            <h2>상세내용</h2>
          </div>
          <div class="article_body">
            <dl class="dl_form dtl_form ">
              <dt><label for="">상위메뉴</label></dt>
              <dd><select name="" id=""><option value="">통보문 수신</option></select></dd>
              <dt><label for="">메뉴명</label></dt>
              <dd><input type="text" /></dd>
              <dt><label for="">설명</label></dt>
              <dd><input type="text" /></dd>
              <dt><label for="">URL</label></dt>
              <dd><input type="text" /></dd>
            </dl>
          </div>
        </div>
      </div>
      <div class="pop_btn_wrap">
        <a href="" class="btn btn_red" role="btn_close">저장</a>
        <a href="" class="btn btn_blue" role="btn_close">수정</a>
        <a href="" class="btn btn_lightgray" role="btn_close">닫기</a>
      </div>
    </div>
  </div>

<div id="wrap">
  <div id="header">
    <h1><a href="">재난방송<strong>온라인시스템</strong></a></h1>
    <div class="nav_wrap">
      <div class="gnb">
        <ul class="gnb_list">
          <li>홍길동</li>
          <li><a href="" class="btn_userinfo divide">내정보</a></li>
          <li><a href="" class="btn_logout">로그아웃</a></li>
        </ul>
      </div>
      <div class="lnb">
        <ul class="lnb_list nav">
          <li><a href="#">통보문수신</a></li>
          <li><a href="#">통보문발신</a>
            <ul class="sub1">
              <li><a href="#">통보문 생성/발신</a></li>
              <li><a href="#">훈련/테스트 발신</a></li>
              <li><a href="#">공지사항 발신</a></li>
              <li><a href="#">발신이력</a></li>
            </ul>
          </li>
          <li><a href="#">조치현황</a>
            <ul class="sub1">
              <li><a href="#">담당자별 조치현황</a></li>
              <li><a href="#">재난방송 조치현황</a></li>
              <li><a href="#">수동발송</a></li>
              <li><a href="#">FAX/LMS 발송이력</a></li>
            </ul>
          </li>
          <li><a href="#">재난방송수신 클라이언트</a>
            <ul class="sub1">
              <li><a href="#">클라이언트 관리</a></li>
              <li><a href="#">클라이언트 그룹관리</a></li>
              <li><a href="#">클라이언트 정보변경요청</a></li>
              <li><a href="#">클라이언트 접속현황</a></li>
              <li><a href="#">교육이수결과</a></li>
            </ul>
          </li>
          <li><a href="#">기초정보관리</a>
            <ul class="sub1">
              <li><a href="#">공통코드</a></li>
              <li><a href="#">사용자 관리</a></li>
              <li><a href="#">연계기관</a></li>
              <li><a href="#">통보문 템플릿</a></li>
            </ul>
          </li>
          <li><a href="#">시스템관리</a>
            <ul class="sub1">
              <li><a href="#">시스템설정</a></li>
              <li><a href="#">권한관리</a></li>
              <li><a href="#">메뉴관리</a></li>
              <li><a href="#">로그관리</a></li>
              <li><a href="#">연계시스템 로그</a></li>
            </ul>
          </li>
          <li><a href="#">통합게시판</a>
            <ul class="sub1">
              <li><a href="#">자료실</a></li>
              <li><a href="#">시스템공지</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div id="cont">

    <!-- snb -->
  	<div id="snb" class="snb">
      <div class="snb_wrap">
        <div class="snb_tit bass">
          <h1>시스템관리</h1>
        </div>
        <ul class="snb_list">
          <li><a href="#">시스템설정</a></li>
          <li><a href="#">권한관리</a></li>
          <li><a href="#" class="on">메뉴관리</a></li>
          <li><a href="#">로그관리</a></li>
          <li><a href="#">연계시스템 로그</a></li>
        </ul>
      </div>
      <p class="copyright">© Ministry of Science and ICT. All rights reserved.</p>
    </div>
    <!-- snb__e -->

    <!-- content -->
    <div class="content">
      <div class="cont_tit">
        <h1>메뉴관리<span>시스템관리</span></h1>
        <div class="locate">
          <ul>
            <li><a href="#"><i class="axi axi-ion-home" title="home"></i></a></li>
            <li><a href="#">시스템관리</a></li>
            <li>메뉴관리</li>
          </ul>
        </div>
      </div>
      <div class="cont_body">
        <div class="tab_wrap">
          <ul class="tab">
            <li><a href="#tab01">권한별 메뉴</a></li>
            <li class="on"><a href="#tab02">메뉴관리</a></li>
          </ul>
          <div id="tab02" class="tab_contents">
            <div class="article">
              <div class="article_tit">
                <h2 class="blind">메뉴</h2>
                <span class="fr">
                  <a href="" class="btn_axi axi_red btn_save">저장</a>
                  <a href="" class="btn_axi axi_mint btn_edit">수정</a>
                  <a href="" class="btn_axi axi_gray btn_cancel">취소</a>
                </span>
              </div>
              <div class="article_body menu_wrap">
                <div class="menu_canvas">
                  <div class="deps1_wrap">
                    <div class="deps1">
                      <div class="deps1tit">
                        <h1>통보문수신</h1>
                        <span class="deps1_btn_wrap">
                          <a href="" class="axi btn_edit" title="수정">수정</a>
                          <a class="btn btn_red save" title="저장">저장</a>
                        </span>
                      </div>
                      <ul id="sortable1" class="droptrue deps1menu">
                        <li>통보문 수신내역</li>
                      </ul>
                      <a href="" class="add_sub">서브메뉴 추가</a>
                    </div>

                    <div class="deps1">
                      <div class="deps1tit">
                        <h1>통보문발신</h1>
                        <span class="deps1_btn_wrap">
                          <a href="" class="axi btn_edit" title="수정">수정</a>
                          <a class="btn btn_red save" title="저장">저장</a>
                        </span>
                      </div>
                      <ul id="sortable2" class="droptrue deps1menu">
                        <li>통보문생성/발신</li>
                        <li>훈련/테스트 발신</li>
                        <li>공지사항 발신</li>
                        <li>발신이력</li>
                      </ul>
                      <a href="" class="add_sub">서브메뉴 추가</a>
                    </div>

                    <div class="deps1 editable">
                      <div class="deps1tit">
                        <h1><input type="text" value="조치현황"/></h1>
                        <span class="deps1_btn_wrap">
                          <a href="" class="axi btn_edit" title="수정">수정</a>
                          <a class="btn btn_red save" title="저장">저장</a>
                        </span>
                      </div>
                      <ul id="sortable3" class="droptrue deps1menu">
                      </ul>
                      <a href="" class="add_sub">서브메뉴 추가</a>
                    </div>
                  </div>

                  <div class="deps1 default">
                    <a href="" class="add_menu">대메뉴추가</a>
                  </div>

                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
    <!-- content__e -->
  </div>

</div>
</body>
</html>
<script type="text/javascript">
  $(function(){
    init();
    var menu_canvas =  $( ".menu_canvas" ),
        deps1menu = $( ".deps1menu" );

    //대메뉴 정렬
    menu_canvas.sortable({
      connectWith: ".deps1",
      handle: ".deps1tit",
      cancel: ".axi,.default,.editable",
      items: ".deps1:not(.default)",
      placeholder: "active",
      placeholderSize: true,
      stop: function( event, ui ) {
      alert('안뇽');
      }
    });
    //서브메뉴 정렬
    deps1menu.sortable({
      connectWith: ".deps1menu",
      placeholder: "active",
      stop: function( event, ui ) {
      alert('hihi');
      }
    });
    // placeholder Getter
    var forcePlaceholderSize = menu_canvas.sortable( "option", "forcePlaceholderSize" );
    // placeholder Setter
    menu_canvas.sortable( "option", "forcePlaceholderSize", true );

    //메뉴수정
    var deps1Edit = $('.deps1_btn_wrap a'),
        btnEdit = $('.deps1_btn_wrap .btn_edit'),
        btnSave = $('.deps1_btn_wrap .save');


    $('.deps1_wrap').on('click', "a", function(e){
      e.preventDefault();
      var target = $(this).parents('.deps1tit').find('h1'),html;
      $(this).parents('.deps1').toggleClass('editable');
      if($(this).is(btnEdit)){
        html = '<input type="text" value="'+ target.text() +'"/>'
        target.html(html);
      }else if ($(this).is(btnSave)) {
        var getVal = $(this).parents('.deps1tit').find('input').val();
        target.html(getVal);
      }else{
        alert('서브메뉴 추가팝업');
        $('.overlay').show();
        $('.overlay').find('.pop_wrap').show();
      }
    });

    //대메뉴 추가
    var deps1Add = $('.add_menu');
    deps1Add.on('click', function(e){
      e.preventDefault();
      var target = $('.deps1_wrap');
      var tmpl = '<div class="deps1 editable">';
          tmpl += '<div class="deps1tit">';
          tmpl += '<h1><input type="text" /></h1>';
          tmpl += '<span class="deps1_btn_wrap">';
          tmpl += '<a class="axi btn_edit" title="수정">수정</a>';
          tmpl += '<a class="btn btn_red save" title="저장">저장</a>';
          tmpl += '</span></div>';
          tmpl += '<ul id="sortable3" class="droptrue deps1menu"></ul>';
          tmpl += '<a href="" class="add_sub">서브메뉴 추가</a>';
          tmpl += '</div>';
      target.append(tmpl);
    });



  });

</script>
